{% extends 'base.html' %}
{% block content %}

{% if user.is_authenticated %}

<div class="container">
    <h2 class="mt-2">How much stock do I need?</h2>
    <div class="row mt-2">
        <div class="col-md-6">
            <h5>Add a recipe:</h5>
            <form class="border p-2" action="{% url 'ingredients_calculation' %}" method="POST">
                {% csrf_token %}
                {{ IngredientsCalculationForm.as_p }}
                <hr>
                <button type="submit">Add Recipe</button>
            </form>
        </div>

        {% if ingredients %}
        <div class="col-md-6 mt-3 mt-md-0">
            <h5>Recipes:</h5>
            {% for recipe in ingredients %}
            <ul>
                <li>{{ recipe.recipe }} ({{ recipe.quantity }}L)</li>
            </ul>
            {% endfor %}

            <div class="text-center mt-md-2">
                <form action="{% url 'reset_ingredients' %}" method="POST">
                    {% csrf_token %}
                    <button type="submit" class="bg-danger rounded border">RESET</button>
                </form>
            </div>
            {% endif %}

        </div>

        <hr class="mt-3">

        <div class="text-center">
            <a href=" {% url 'ingredients_result' %}"
                class="bg-info rounded border text-dark text-decoration-none p-1">CALCULATE</a>
        </div>
    </div>
</div>

{% else %}

<div class="col-8 col-xl-6 mx-auto">
    <div class="text-center bg-warning pb-3">
        <h1 class="mt-3">Welcome to the Casa del Gelat stock controller</h1>
        <h4 class="mt-3">Please sign in</h4>
        <a href="{% url 'account_login' %}" class="btn bg-success">Log In</a>
    </div>
</div>

{% endif %}

{% endblock %}